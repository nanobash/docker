version: "3"

networks:
  projextX:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.100.0/24

services:
  nginx:
    build:
      context: ./nginx
    container_name: nginx
    depends_on:
      - php
    networks:
      projextX:
        ipv4_address: 192.168.100.10
    ports:
      - "${HOST_PORT}:${CONTAINER_PORT}"
    volumes:
      - ${APPLICATION}:${WWW_DIR}
      - ./nginx/sites/default.conf:/etc/nginx/conf.d/default.conf
    working_dir: ${WWW_DIR}

  php:
    container_name: php${PHP_VERSION}
    image: php:${PHP_VERSION}-fpm
    networks:
      projextX:
        ipv4_address: 192.168.100.11
    volumes:
      - ${APPLICATION}:${WWW_DIR}
